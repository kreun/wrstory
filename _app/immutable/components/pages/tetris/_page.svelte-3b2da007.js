import{S as fe,i as ie,s as ce,k as T,a as R,w as ae,q as K,T as he,l as z,h as b,c as Z,x as ue,m as N,r as Q,n as C,L as _e,E as F,b as I,y as ge,a3 as me,F as pe,a4 as de,u as ke,f as be,t as ve,z as we,P as j,o as ye,a5 as Ee,e as X,A as De,p}from"../../../chunks/index-07efb363.js";import{S as Se}from"../../../chunks/SvelteSeo-94b937d8.js";function U(r,l,e){const t=r.slice();return t[27]=l[e],t[29]=e,t}function x(r,l,e){const t=r.slice();return t[30]=l[e],t[32]=e,t}function $(r,l,e){const t=r.slice();return t[33]=l[e],t[35]=e,t}function ee(r,l,e){const t=r.slice();return t[36]=l[e],t[38]=e,t}function te(r){let l;return{c(){l=T("div"),this.h()},l(e){l=z(e,"DIV",{class:!0,style:!0}),N(l).forEach(b),this.h()},h(){C(l,"class","base-block svelte-88fay2"),p(l,"left",r[38]*r[6]+"px"),p(l,"top",r[35]*r[6]+"px"),p(l,"background-color","dimgray"),p(l,"width",r[6]+"px"),p(l,"height",r[6]+"px"),p(l,"background-color",r[9][r[36]])},m(e,t){I(e,l,t)},p(e,t){t[0]&64&&p(l,"left",e[38]*e[6]+"px"),t[0]&64&&p(l,"top",e[35]*e[6]+"px"),t[0]&64&&p(l,"width",e[6]+"px"),t[0]&64&&p(l,"height",e[6]+"px"),t[0]&16&&p(l,"background-color",e[9][e[36]])},d(e){e&&b(l)}}}function le(r){let l,e=r[33],t=[];for(let s=0;s<e.length;s+=1)t[s]=te(ee(r,e,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();l=X()},l(s){for(let i=0;i<t.length;i+=1)t[i].l(s);l=X()},m(s,i){for(let n=0;n<t.length;n+=1)t[n].m(s,i);I(s,l,i)},p(s,i){if(i[0]&592){e=s[33];let n;for(n=0;n<e.length;n+=1){const w=ee(s,e,n);t[n]?t[n].p(w,i):(t[n]=te(w),t[n].c(),t[n].m(l.parentNode,l))}for(;n<t.length;n+=1)t[n].d(1);t.length=e.length}},d(s){j(t,s),s&&b(l)}}}function se(r){let l;return{c(){l=T("dir"),this.h()},l(e){l=z(e,"DIR",{class:!0,style:!0}),N(l).forEach(b),this.h()},h(){C(l,"class","unit svelte-88fay2"),p(l,"width",r[6]+"px"),p(l,"height",r[6]+"px"),p(l,"top",r[1]*r[7]+r[7]*(r[29]+1)+"px"),p(l,"left",r[2]*r[7]+r[7]*r[32]+"px"),p(l,"background-color",r[9][r[30]])},m(e,t){I(e,l,t)},p(e,t){t[0]&64&&p(l,"width",e[6]+"px"),t[0]&64&&p(l,"height",e[6]+"px"),t[0]&130&&p(l,"top",e[1]*e[7]+e[7]*(e[29]+1)+"px"),t[0]&132&&p(l,"left",e[2]*e[7]+e[7]*e[32]+"px"),t[0]&256&&p(l,"background-color",e[9][e[30]])},d(e){e&&b(l)}}}function re(r){let l,e=r[30]!==0&&se(r);return{c(){e&&e.c(),l=X()},l(t){e&&e.l(t),l=X()},m(t,s){e&&e.m(t,s),I(t,l,s)},p(t,s){t[30]!==0?e?e.p(t,s):(e=se(t),e.c(),e.m(l.parentNode,l)):e&&(e.d(1),e=null)},d(t){e&&e.d(t),t&&b(l)}}}function ne(r){let l,e=r[27],t=[];for(let s=0;s<e.length;s+=1)t[s]=re(x(r,e,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();l=X()},l(s){for(let i=0;i<t.length;i+=1)t[i].l(s);l=X()},m(s,i){for(let n=0;n<t.length;n+=1)t[n].m(s,i);I(s,l,i)},p(s,i){if(i[0]&966){e=s[27];let n;for(n=0;n<e.length;n+=1){const w=x(s,e,n);t[n]?t[n].p(w,i):(t[n]=re(w),t[n].c(),t[n].m(l.parentNode,l))}for(;n<t.length;n+=1)t[n].d(1);t.length=e.length}},d(s){j(t,s),s&&b(l)}}}function Ce(r){let l,e,t,s,i,n,w,H,J,B,P,M,q,m,E,Y,V,A,D;t=new Se({props:{title:"테트리스",description:"테트리스 화이트래빗스토리",openGraph:{title:"테트리스 화이트래빗스토리",description:"테트리스 화이트래빗스토리",url:"https://www.wrstory.com/tetris",type:"website",images:[{url:"https://www.wrstory.com/wrstory-title.png",width:850,height:650,alt:"화이트래빗스토리"}]}}});let S=r[4],d=[];for(let o=0;o<S.length;o+=1)d[o]=le($(r,S,o));let O=r[8],_=[];for(let o=0;o<O.length;o+=1)_[o]=ne(U(r,O,o));return{c(){l=T("meta"),e=R(),ae(t.$$.fragment),s=R(),i=T("div"),n=T("div"),w=T("div");for(let o=0;o<d.length;o+=1)d[o].c();H=R();for(let o=0;o<_.length;o+=1)_[o].c();J=R(),B=T("div"),P=K("SCORE : "),M=K(r[3]),m=R(),E=T("div"),Y=K("←좌 우→ ↑회전 r 다시하기 spacebar 일시정지"),this.h()},l(o){const v=he("svelte-j1lvzy",document.head);l=z(v,"META",{name:!0,content:!0}),v.forEach(b),e=Z(o),ue(t.$$.fragment,o),s=Z(o),i=z(o,"DIV",{class:!0});var c=N(i);n=z(c,"DIV",{class:!0,style:!0});var y=N(n);w=z(y,"DIV",{class:!0});var G=N(w);for(let u=0;u<d.length;u+=1)d[u].l(G);G.forEach(b),H=Z(y);for(let u=0;u<_.length;u+=1)_[u].l(y);J=Z(y),B=z(y,"DIV",{class:!0});var L=N(B);P=Q(L,"SCORE : "),M=Q(L,r[3]),L.forEach(b),y.forEach(b),c.forEach(b),m=Z(o),E=z(o,"DIV",{class:!0});var a=N(E);Y=Q(a,"←좌 우→ ↑회전 r 다시하기 spacebar 일시정지"),a.forEach(b),this.h()},h(){document.title="화이트래빗스토리-테트리스",C(l,"name","description"),C(l,"content","테트리스 화이트래빗스토리"),C(w,"class","base-blocks"),C(B,"class","info svelte-88fay2"),C(n,"class","game svelte-88fay2"),C(n,"style",""),_e(()=>r[11].call(n)),C(i,"class","game-all svelte-88fay2"),C(E,"class","game-desc svelte-88fay2")},m(o,v){F(document.head,l),I(o,e,v),ge(t,o,v),I(o,s,v),I(o,i,v),F(i,n),F(n,w);for(let c=0;c<d.length;c+=1)d[c].m(w,null);F(n,H);for(let c=0;c<_.length;c+=1)_[c].m(n,null);F(n,J),F(n,B),F(B,P),F(B,M),q=me(n,r[11].bind(n)),I(o,m,v),I(o,E,v),F(E,Y),V=!0,A||(D=pe(window,"keydown",de(r[10])),A=!0)},p(o,v){if(v[0]&592){S=o[4];let c;for(c=0;c<S.length;c+=1){const y=$(o,S,c);d[c]?d[c].p(y,v):(d[c]=le(y),d[c].c(),d[c].m(w,null))}for(;c<d.length;c+=1)d[c].d(1);d.length=S.length}if(v[0]&966){O=o[8];let c;for(c=0;c<O.length;c+=1){const y=U(o,O,c);_[c]?_[c].p(y,v):(_[c]=ne(y),_[c].c(),_[c].m(n,J))}for(;c<_.length;c+=1)_[c].d(1);_.length=O.length}(!V||v[0]&8)&&ke(M,o[3])},i(o){V||(be(t.$$.fragment,o),V=!0)},o(o){ve(t.$$.fragment,o),V=!1},d(o){b(l),o&&b(e),we(t,o),o&&b(s),o&&b(i),j(d,o),j(_,o),q(),o&&b(m),o&&b(E),A=!1,D()}}}let Ie=150;function oe(r){return r==="I"?[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]:r==="L"?[[0,2,0],[0,2,0],[0,2,2]]:r==="J"?[[0,3,0],[0,3,0],[3,3,0]]:r==="O"?[[4,4],[4,4]]:r==="Z"?[[5,5,0],[0,5,5],[0,0,0]]:r==="S"?[[0,6,6],[6,6,0],[0,0,0]]:r==="T"?[[0,7,0],[7,7,7],[0,0,0]]:void 0}function Be(r,l,e){let t=!1,s=0,i=0,n=!1,w=0;function H(){if(n&&t)if(J())e(1,s++,s);else{n=!1,B([..._]);let u=[];for(let f=0;f<m.length;f++){let g=0;for(let k=0;k<m[f].length;k++)m[f][k]===0&&g++;g===0&&u.push(f)}u=u.sort(function(f,g){return g-f});let h=u.length;for(let f=0;f<u.length;f++)m.splice(u[f],1);for(let f=0;f<h;f++)m.unshift(Array.from({length:10},()=>0)),e(3,w+=f+1);P()}}function J(){let a=!0,u=0;for(let h=0;h<_.length;h++)for(let f=0;f<_[h].length;f++)_[h][f]!==0&&((h+s>17||h+s+2>=0&&m[h+s+2][f+i]!==0)&&(a=!1),h+s+2<u&&(u=h+s+2));return a===!1&&u<0&&(t=!1),a}function B(a){let u=s+1,h=i;for(let f=0;f<a.length;f++)for(let g=0;g<a[f].length;g++)a[f][g]!==0&&f+u>=0&&e(4,m[f+u][g+h]=a[f][g],m);e(4,m=[...m])}async function P(){if(t){await De(),e(8,_=oe(V()));let a=_[0].length;e(2,i=a==2?4:3),e(1,s=-5),n=!0}}const M=["I","L","J","O","Z","S","T"],q=["#ffffff88","#5FB1FC","#FFE466","#91CE51","#DD5536","#FF725F","#91CE51","#E9ED3D"];let m;function E(){e(4,m=Array.from({length:20},()=>0));for(let a=0;a<m.length;a++)e(4,m[a]=Array.from({length:10},()=>0),m)}E();function Y(){e(3,w=0),t=!0,E(),e(8,_=oe(V()));let a=_[0].length;e(2,i=a==2?4:3),e(1,s=-5),n=!0}function V(){let a=Math.floor(Math.random()*M.length);return M[a]}let A,D,S,d;function O(a){e(6,S=D/10),e(7,d=D/10)}let _=[],o;ye(()=>{t=!0,e(6,S=D/10),e(7,d=D/10),E(),P(),o=setInterval(()=>{H()},Ie)}),Ee(()=>{t=!1,clearInterval(o)});function v(a){let u=!0;for(let h=0;h<_.length;h++)for(let f=0;f<_[h].length;f++)if(_[h][f]!==0){let g=f+i+a;(g<0||g>9||h+s+2>=0&&m[h+s+2]&&m[h+s+2][f+i+a]&&m[h+s+2][f+i+a]!==0)&&(u=!1)}u&&e(2,i+=a)}function c(a){switch(a.keyCode){case 38:t&&e(8,_=G(_,1));break;case 40:t&&H();break;case 37:t&&v(-1);break;case 39:t&&v(1);break;case 32:n=!n;break;case 82:n=!1,Y();break}}function y(a){let u=0,h=!0;for(let f=0;f<a.length;f++)for(let g=0;g<a[f].length;g++)if(a[f][g]!==0){let k=g+i;if(k<0?u=u>k?k:u:k>9&&(u=u<k?k:u),f+s+2>0&&m[f+s+2]&&m[f+s+2][g+i]&&m[f+s+2][g+i]!==0){h=!1;break}}return{result:u,enable:h}}function G(a,u){let h=JSON.parse(JSON.stringify(a));for(let k=0;k<h.length;++k)for(let W=0;W<k;++W)[h[W][k],h[k][W]]=[h[k][W],h[W][k]];u>0?h.forEach(k=>k.reverse()):h.reverse();let g=y(h).result;return g===0||(g<0?e(2,i+=g*-1):g>9&&e(2,i+=9-g)),h}function L(){A=this.clientHeight,D=this.clientWidth,e(5,A),e(0,D)}return r.$$.update=()=>{r.$$.dirty[0]&1&&O()},[D,s,i,w,m,A,S,d,_,q,c,L]}class Oe extends fe{constructor(l){super(),ie(this,l,Be,Ce,ce,{},null,[-1,-1])}}export{Oe as default};
