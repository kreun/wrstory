import{W as L,S as H,i as N,s as q,k as m,a as M,q as P,l as _,m as b,c as S,r as B,h as u,n as d,L as O,b as I,E as g,X as U,F as y,B as E,R,G as V,o as C}from"../../../chunks/index-07efb363.js";import{w}from"../../../chunks/index-fd57063c.js";import{l as F}from"../../../chunks/index-ba285384.js";const G="https://talk.wrstory.com/",h=F(G,{reconnection:!0});let v=w("");function W(){h.on("connect",()=>{console.log("연결",T),h.emit("init",{type:"user",id:T()})}),h.on("gpt",e=>{e.msg=e.msg.replace(`
`,"<br>");let s=L(v);v.set(s+e.msg)})}function X(e){if(e===void 0||e==="")return console.log("'메시지를 입력해 주세요.'"),"메시지를 입력해 주세요.";v.set(""),h.emit("gpt-taro",{type:"user",id:T(),card:"여왕카드, 바보카드, 태양카드",message:e})}const k=w([]);k.subscribe(e=>{e!==void 0&&localStorage.setItem("userID",e)});function j(){if(localStorage.userID===void 0||localStorage.userID===""){let e=localStorage.uuid;k.set(e)}}function T(){return L(k)}function z(e){let s,n,l,i,c,a,o,p,f;return{c(){s=m("div"),n=m("input"),l=M(),i=m("button"),c=P("보내기"),a=M(),o=m("div"),this.h()},l(t){s=_(t,"DIV",{class:!0});var r=b(s);n=_(r,"INPUT",{type:!0,name:!0}),l=S(r),i=_(r,"BUTTON",{});var D=b(i);c=B(D,"보내기"),D.forEach(u),r.forEach(u),a=S(t),o=_(t,"DIV",{class:!0,contenteditable:!0}),b(o).forEach(u),this.h()},h(){d(n,"type","text"),d(n,"name","send"),d(s,"class","send-view svelte-q6cbsv"),d(o,"class","result"),d(o,"contenteditable","false"),e[0]===void 0&&O(()=>e[5].call(o))},m(t,r){I(t,s,r),g(s,n),U(n,e[1]),g(s,l),g(s,i),g(i,c),I(t,a,r),I(t,o,r),e[0]!==void 0&&(o.innerHTML=e[0]),p||(f=[y(n,"input",e[4]),y(i,"click",e[2]),y(o,"input",e[5])],p=!0)},p(t,[r]){r&2&&n.value!==t[1]&&U(n,t[1]),r&1&&t[0]!==o.innerHTML&&(o.innerHTML=t[0])},i:E,o:E,d(t){t&&u(s),t&&u(a),t&&u(o),p=!1,R(f)}}}function A(e,s,n){let l;V(e,v,t=>n(3,l=t));let i="";function c(t){n(0,i=t)}let a="";function o(){n(0,i=""),X(a)}C(async()=>{j(),W()});function p(){a=this.value,n(1,a)}function f(){i=this.innerHTML,n(0,i)}return e.$$.update=()=>{e.$$.dirty&8&&c(l)},[i,a,o,l,p,f]}class Y extends H{constructor(s){super(),N(this,s,A,z,q,{})}}export{Y as default};
